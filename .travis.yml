cache: pip

matrix:
  include:
    - os: linux
      python: 3.4
      language: python
    - os: linux
      dist: precise
      python: 3.5
      language: python
    - os: linux
      dist: trusty
      python: 3.6
      language: python
    - os: linux
      dist: trusty
      python: 3.5
      sudo: required
      language: python
      compiler: clang
      env: COMPILER='clang-3.9'
      addons:
        apt:
          sources:
            - ['llvm-toolchain-trusty-3.9', 'ubuntu-toolchain-r-test']
          packages:
            - 'clang-3.9'
    - os: linux
      dist: trusty
      python: 3.6
      sudo: required
      language: python
      compiler: gcc
      env: COMPILER='gcc-6'
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - gcc-6
    - os: osx
      osx_image: xcode7.3
      language: generic
    - os: osx
      osx_image: xcode8.2
      language: generic

before_install:
  - if [[ "$TRAVIS_OS_NAME" == osx && $TRAVIS_PYTHON_VERSION != 2* ]]; then brew update && brew install python3; alias python='python3'; alias pip='pip3'; fi
  - if [[ $COMPILER == g* ]]; then sudo update-alternatives --install /usr/bin/gcc gcc "/usr/bin/${COMPILER}" 1; export CC="${COMPILER}"; fi
  - if [[ $TRAVIS_PYTHON_VERSION == 3* ]]; then alias python='python3'; fi

install:
  - pip install -U setuptools
  - python setup.py install

script: python test.py
